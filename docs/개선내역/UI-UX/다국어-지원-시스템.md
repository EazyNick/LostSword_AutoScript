# 다국어 지원 시스템

## 개요

애플리케이션에 한국어와 영어를 지원하는 완전한 다국어(i18n) 시스템을 구현했습니다. 사용자는 설정 페이지에서 언어를 선택할 수 있으며, 선택한 언어가 모든 UI 요소에 즉시 반영됩니다.

## 구현 일자

2025-12-20

## 주요 기능

### 1. 언어 선택 및 저장

- **설정 페이지**: 사용자가 한국어 또는 영어를 선택할 수 있음
- **데이터베이스 저장**: 선택한 언어가 DB에 저장되어 재시작 후에도 유지
- **로컬 스토리지**: 즉시 적용을 위한 클라이언트 측 저장

### 2. 실시간 언어 변경

- 언어 변경 시 `languageChanged` 커스텀 이벤트 발생
- 모든 페이지 매니저가 이벤트를 수신하여 UI 자동 업데이트
- 정적 HTML 텍스트와 동적 생성 텍스트 모두 즉시 반영

### 3. 번역 적용 범위

#### 페이지
- ✅ 설정 페이지: 모든 설정 항목 및 설명
- ✅ 대시보드 페이지: 제목, 버튼, 통계 카드, 스크립트 카드
- ✅ 실행 기록 페이지: 필터, 로그 항목, 상태 텍스트
- ✅ 스크립트 편집 페이지: 헤더, 버튼

#### UI 컴포넌트
- ✅ 사이드바: 메뉴 항목, 스크립트 섹션 제목
- ✅ 헤더: 페이지 제목, 설명, 액션 버튼
- ✅ 모달 및 팝업: 확인/취소 버튼, 알림 메시지
- ✅ 실행 결과 모달: 실행 요약, 노드/스크립트 실행 결과
- ✅ Save 버튼 팝업: 저장 완료/실패 메시지

#### 동적 텍스트
- ✅ 실행 상태: "실행 중..." (CSS 변수 사용)
- ✅ 시간 표시: "방금 전", "5분 전" 등
- ✅ 상태 메시지: "정상 실행 완료", "오류로 인해 실행되지 않음" 등

## 기술적 구현

### 중앙화된 번역 시스템

`UI/src/js/utils/i18n.js`에 모든 번역 데이터와 함수가 중앙화되어 있습니다.

```javascript
// 번역 함수
export function t(key, params = {}) {
    const lang = getCurrentLanguage();
    // 번역 키 조회 및 반환
}

// 언어 변경 함수
export async function setLanguage(lang, silent = false) {
    // 언어 설정 저장 및 이벤트 발생
}
```

### 번역 키 구조

계층적 구조로 구성되어 있어 유지보수가 용이합니다:

```
common.*          # 공통 UI 요소
settings.*        # 설정 페이지
sidebar.*         # 사이드바
header.*          # 페이지 헤더
history.*         # 실행 기록
dashboard.*       # 대시보드
```

### 언어 변경 이벤트

```javascript
document.addEventListener('languageChanged', async (event) => {
    const language = event.detail.language;
    // 각 페이지 매니저가 UI 업데이트
});
```

### CSS 변수 활용

CSS의 `content` 속성에 하드코딩된 텍스트는 CSS 변수를 통해 동적으로 변경됩니다:

```css
/* CSS */
.btn-run-text::after {
    content: var(--running-text, ' 실행 중...');
}
```

```javascript
// JavaScript
const runningText = ` ${t('common.running')}...`;
document.documentElement.style.setProperty('--running-text', `'${runningText}'`);
```

## 사용자 경험 개선

### 즉시 반영

언어를 변경하면 즉시 모든 UI 요소가 업데이트됩니다:

1. 설정 페이지에서 언어 선택
2. `languageChanged` 이벤트 발생
3. 모든 페이지 매니저가 이벤트 수신
4. UI 요소 자동 업데이트

### 일관성 유지

모든 UI 요소가 동일한 번역 시스템을 사용하여 일관성 있는 사용자 경험을 제공합니다.

### 사용자 친화적 메시지

개발자가 아닌 일반 사용자도 이해할 수 있는 자연스러운 문구로 번역되었습니다:

- 한국어: "워크플로우가 저장되었습니다."
- 영어: "Workflow has been saved."

## 코드 품질 개선

### 레거시 코드 제거

다국어 지원 구현과 함께 레거시 코드를 정리했습니다:

- Deprecated 함수 제거 (`getActionNodeTypes`, `getActionNodeConfig`)
- 레거시 특수 설정 처리 코드 제거
- 중복 로직 제거

### 유지보수성 향상

- 중앙화된 번역 시스템으로 번역 키 관리 용이
- 계층적 번역 키 구조로 확장성 확보
- 일관된 번역 함수 사용으로 코드 일관성 유지

## 향후 확장 가능성

현재 한국어와 영어를 지원하지만, 번역 시스템은 다른 언어 추가가 용이하도록 설계되었습니다:

1. `i18n.js`의 `translations` 객체에 새 언어 추가
2. 해당 언어의 번역 키 추가
3. 언어 선택 UI에 새 언어 옵션 추가

## 관련 파일

- `UI/src/js/utils/i18n.js`: 번역 시스템 핵심
- `UI/src/pages/workflow/settings.js`: 언어 설정 UI
- `UI/src/pages/workflow/page-router.js`: 언어 변경 이벤트 처리
- `UI/src/pages/workflow/dashboard.js`: 대시보드 번역
- `UI/src/pages/workflow/history.js`: 실행 기록 번역
- `UI/src/js/utils/result-modal.js`: 실행 결과 모달 번역
- `UI/src/js/utils/modal.js`: 일반 모달 번역
