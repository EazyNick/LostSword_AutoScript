/* ========================================== */
/* 노드 설정 모달 기본 구조 스타일 (테마 무관) */
/* ========================================== */

/* ========================================== */
/* 비활성화된 입력 필드 */
/* ========================================== */

/* 비활성화된 입력 필드: 읽기 전용이거나 사용할 수 없는 입력 필드 */
.node-settings-disabled-input {
    width: 100%; /* 전체 너비 사용 */
    padding: 8px; /* 내부 여백 8px */
    border: 1px solid #ddd; /* 회색 테두리 */
    border-radius: 4px; /* 둥근 모서리 */
    background-color: #fafafa; /* 연한 회색 배경 */
    color: #666; /* 회색 텍스트 */
}

/* 비활성화된 선택 필드: 드롭다운 메뉴가 비활성화된 상태 */
.node-settings-disabled-select {
    width: 100%; /* 전체 너비 사용 */
    padding: 8px; /* 내부 여백 8px */
    border: 1px solid #ddd; /* 회색 테두리 */
    border-radius: 4px; /* 둥근 모서리 */
    background-color: #fafafa; /* 연한 회색 배경 */
}

/* ========================================== */
/* 미리보기 영역 기본 구조 */
/* ========================================== */

/* 출력 미리보기 영역 컨테이너 */
.node-settings-preview-output {
    background-color: transparent; /* 투명 배경 */
    border: none; /* 테두리 없음 */
    padding: 0; /* 내부 여백 없음 */
}

/* ========================================== */
/* 필드 경로 자동완성 */
/* ========================================== */

/* 필드 경로 입력 필드 컨테이너 */
.node-field-path-input {
    position: relative;
}

/* 자동완성 미리보기 (회색 텍스트) */
.field-path-autocomplete-preview {
    color: #999 !important;
    opacity: 0.6;
    user-select: none;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* 필드 경로 펼치기 버튼 */
.field-path-expand-btn {
    display: flex;
    align-items: center;
    justify-content: center;
}

.field-path-expand-btn .expand-icon {
    font-size: 10px;
    transition: transform 0.2s;
}

/* 필드 경로 드롭다운 */
.field-path-dropdown {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

.field-path-dropdown-item:hover {
    background-color: var(--bg-hover, #f5f5f5) !important;
}

/* ========================================== */
/* 폼 요소 기본 구조 */
/* ========================================== */

/* 노드 설정 입력 필드: 텍스트, 숫자 등 일반적인 입력 필드 */
.node-settings-input,
.node-settings-select,
.node-settings-textarea {
    width: 100%; /* 전체 너비 사용 */
    padding: 8px; /* 내부 여백 8px */
    border: 1px solid; /* 테두리 (색상은 테마별로 설정) */
    border-radius: 4px; /* 둥근 모서리 */
}

/* 노드 설정 텍스트 영역: 여러 줄 입력이 가능한 텍스트 입력 필드 */
.node-settings-textarea {
    font-family: monospace; /* 고정폭 폰트 (기본값) */
}

/* ========================================== */
/* 폼 레이아웃 */
/* ========================================== */

/* 폼 그룹: 라벨과 입력 필드를 묶는 컨테이너 */
.node-settings-form-group {
    margin-bottom: 15px; /* 하단 여백 15px */
}

/* 폼 그룹 라벨: 입력 필드 위에 표시되는 라벨 텍스트 */
.node-settings-label {
    display: block; /* 블록 요소로 변경 */
    margin-bottom: 5px; /* 하단 여백 5px */
    font-weight: bold; /* 굵은 글씨 */
}

/* Boolean 타입 체크박스 그룹: 레이블과 체크박스를 한 줄에 배치 */
.node-settings-boolean-group {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 16px;
}

/* Boolean 타입 레이블 래퍼: 레이블과 설명을 묶는 컨테이너 */
.node-settings-boolean-label-wrapper {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

/* Boolean 타입 레이블: 체크박스 왼쪽에 표시되는 레이블 */
.node-settings-boolean-label {
    display: block;
    font-weight: bold;
    font-size: 14px;
    line-height: 1.4;
    word-break: keep-all;
}

/* Boolean 타입 도움말 텍스트: 레이블 아래에 표시되는 설명 */
.node-settings-boolean-help {
    margin-top: 0;
    margin-bottom: 0;
    font-size: 12px;
    line-height: 1.4;
    color: var(--text-secondary, #666);
}

/* 체크박스 래퍼: 토글 스위치 스타일의 체크박스 컨테이너 */
.node-settings-checkbox-wrapper {
    display: flex;
    align-items: center;
    flex-shrink: 0;
    cursor: pointer;
}

/* 체크박스 입력 필드: 기본 체크박스 숨김 */
.node-settings-checkbox-wrapper .node-settings-checkbox {
    position: absolute;
    opacity: 0;
    width: 0;
    height: 0;
}

/* 체크박스 슬라이더: 토글 스위치 스타일의 시각적 요소 */
.node-settings-checkbox-slider {
    position: relative;
    display: inline-block;
    width: 44px;
    height: 24px;
    background-color: var(--bg-tertiary, #ccc);
    border-radius: 12px;
    transition: background-color 0.3s ease;
    flex-shrink: 0;
}

/* 체크박스 슬라이더 내부 원형 버튼 */
.node-settings-checkbox-slider::before {
    content: '';
    position: absolute;
    width: 18px;
    height: 18px;
    left: 3px;
    top: 3px;
    background-color: white;
    border-radius: 50%;
    transition: transform 0.3s ease;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

/* 체크박스가 체크된 상태일 때 슬라이더 배경색 변경 */
.node-settings-checkbox:checked + .node-settings-checkbox-slider {
    background-color: var(--primary-color, #2673ea);
}

/* 체크박스가 체크된 상태일 때 슬라이더 내부 버튼 위치 변경 */
.node-settings-checkbox:checked + .node-settings-checkbox-slider::before {
    transform: translateX(20px);
}

/* 체크박스 호버 효과 */
.node-settings-checkbox-wrapper:hover .node-settings-checkbox-slider {
    box-shadow: 0 0 0 3px rgba(38, 115, 234, 0.1);
}

/* 미리보기 라벨: 미리보기 영역 위에 표시되는 라벨 텍스트 */
.node-settings-preview-label {
    font-weight: bold; /* 굵은 글씨 */
    margin-bottom: 8px; /* 하단 여백 8px */
}

/* 섹션 구분선: 폼 섹션을 구분하는 상단 테두리 */
.node-settings-section-divider {
    border-top: 1px solid; /* 상단 테두리 (색상은 테마별로 설정) */
    padding-top: 15px; /* 상단 여백 15px */
    margin-top: 15px; /* 상단 마진 15px */
}

/* ========================================== */
/* 미리보기 데이터 필드 구조 */
/* ========================================== */

/* 미리보기 데이터 필드 박스: JSON 데이터의 각 필드를 표시하는 컨테이너 */
.node-preview-field-box {
    display: flex; /* 플렉스박스 레이아웃 */
    flex-direction: column; /* 세로 방향 배치 */
    gap: 5px; /* 요소들 사이 간격 5px */
    margin-bottom: 12px; /* 하단 여백 12px */
}

/* 마지막 필드 박스: 하단 여백 제거 */
.node-preview-field-box:last-child {
    margin-bottom: 0; /* 하단 여백 없음 */
}

/* 미리보기 필드 라벨: 필드 이름을 표시하는 텍스트 */
.node-preview-field-label {
    font-weight: 600; /* 중간 굵기 */
    font-size: 14px; /* 중간 글씨 크기 */
}

/* 미리보기 텍스트 영역: 미리보기 데이터를 표시하는 textarea */
.node-preview-textarea {
    resize: vertical; /* 세로 방향 크기 조절만 가능 */
    min-height: 40px; /* 최소 높이 40px */
    font-family: monospace; /* 고정폭 폰트 (JSON 표시용) */
    font-size: 12px; /* 작은 글씨 크기 */
    line-height: 1.5; /* 줄 간격 */
}

/* ========================================== */
/* 미리보기 값 타입별 색상 (테마 무관) */
/* ========================================== */

/* 문자열 값: 텍스트 데이터를 표시할 때 사용 */
.node-preview-string-value {
    color: #333; /* 어두운 회색 텍스트 */
}

/* 숫자 값: 숫자 데이터를 표시할 때 사용 */
.node-preview-number-value {
    color: #f57c00; /* 주황색 텍스트 */
    font-weight: 500; /* 중간 굵기 */
}

/* 불린 값: true/false 데이터를 표시할 때 사용 */
.node-preview-boolean-value {
    color: #7b1fa2; /* 보라색 텍스트 */
    font-weight: 500; /* 중간 굵기 */
}

/* null 값: null 데이터를 표시할 때 사용 */
.node-preview-null-value,
.node-preview-empty {
    color: #999; /* 회색 텍스트 */
    font-style: italic; /* 이탤릭체 */
}

/* ========================================== */
/* 로딩 상태 스타일 */
/* ========================================== */

/* 로딩 상태 컨테이너: 계산 중일 때 미리보기 영역에 적용되는 스타일 */
.node-preview-loading-state {
    position: relative; /* 상대 위치 (스피너 위치 기준) */
    background-color: #f5f5f5 !important; /* 연한 회색 배경 (강제 적용) */
    border-color: #4a90e2 !important; /* 파란색 테두리 (강제 적용) */
    animation: node-preview-pulse 1.5s ease-in-out infinite; /* 펄스 애니메이션 반복 */
}

/* 출력 미리보기 영역도 로딩 상태일 때 */
.node-settings-preview-output.node-preview-loading-state {
    background-color: transparent; /* 투명 배경 */
    border: none; /* 테두리 없음 */
}

/* 로딩 상태의 textarea: 계산 중일 때 표시되는 textarea 스타일 */
.node-preview-loading-textarea {
    min-height: 60px; /* 최소 높이 60px */
    background-color: #f5f5f5; /* 연한 회색 배경 */
    border-color: #4a90e2; /* 파란색 테두리 */
    color: #4a90e2; /* 파란색 텍스트 */
    font-weight: 500; /* 중간 굵기 */
    position: relative; /* 상대 위치 (스피너 위치 기준) */
    padding-left: 35px; /* 왼쪽 여백 35px (스피너 공간 확보) */
    text-align: left; /* 왼쪽 정렬 */
    line-height: 1.5; /* 줄 간격 1.5배 */
    width: 100%; /* 전체 너비 사용 */
    font-family: monospace; /* 고정폭 폰트 */
    font-size: 12px; /* 작은 글씨 크기 */
}

/* 로딩 스피너를 textarea 앞에 표시: textarea 왼쪽에 회전하는 스피너 아이콘 */
.node-preview-loading-textarea::before {
    content: ''; /* 가상 요소 생성 */
    position: absolute; /* 절대 위치 */
    left: 10px; /* 왼쪽에서 10px */
    top: 50%; /* 세로 중앙 */
    transform: translateY(-50%); /* 정확한 중앙 정렬 */
    width: 18px; /* 스피너 너비 18px */
    height: 18px; /* 스피너 높이 18px */
    border: 2px solid #e0e0e0; /* 회색 테두리 */
    border-top-color: #4a90e2; /* 상단만 파란색 */
    border-radius: 50%; /* 원형 */
    animation: node-preview-spin 0.8s linear infinite; /* 회전 애니메이션 반복 */
    pointer-events: none; /* 마우스 이벤트 무시 */
}

/* 로딩 상태일 때 shimmer 효과: textarea 배경에 흐르는 빛 효과 */
.node-preview-loading-state .node-preview-loading-textarea {
    background: linear-gradient(90deg, #f5f5f5 0%, #f9f9f9 50%, #f5f5f5 100%); /* 그라데이션 배경 */
    background-size: 200% 100%; /* 배경 크기 2배 (애니메이션용) */
    animation: node-preview-shimmer 1.5s ease-in-out infinite; /* shimmer 애니메이션 반복 */
}

/* 펄스 애니메이션: 로딩 중일 때 테두리와 그림자가 깜빡이는 효과 */
@keyframes node-preview-pulse {
    0%,
    100% {
        opacity: 1; /* 완전히 불투명 */
        box-shadow: 0 0 0 0 rgba(74, 144, 226, 0.4); /* 그림자 없음 */
    }
    50% {
        opacity: 0.8; /* 약간 투명 */
        box-shadow: 0 0 0 4px rgba(74, 144, 226, 0); /* 그림자 확장 */
    }
}

/* 스피너 회전 애니메이션: 스피너가 360도 회전하는 효과 */
@keyframes node-preview-spin {
    to {
        transform: translateY(-50%) rotate(360deg); /* 중앙 정렬 유지하며 360도 회전 */
    }
}

/* Shimmer 애니메이션: 배경이 좌우로 흐르는 효과 */
@keyframes node-preview-shimmer {
    0% {
        background-position: -200% 0; /* 배경을 왼쪽 밖에 배치 */
    }
    100% {
        background-position: 200% 0; /* 배경을 오른쪽 밖에 배치 */
    }
}

/* ========================================== */
/* 이전 노드 출력 변수 목록 (n8n 스타일) */
/* ========================================== */

/* 이전 노드 출력 변수 컨테이너 */
.node-previous-output-variables {
    padding: 12px;
    background-color: var(--bg-secondary, #f5f5f5);
    border-radius: 6px;
    border: 1px solid var(--border-color, #e5e7eb);
}

/* 이전 노드 출력 변수 헤더 */
.node-previous-output-header {
    margin-bottom: 8px;
}

/* 이전 노드 출력 변수 목록 */
.node-previous-output-variables-list {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

/* 변수 태그 */
.node-output-variable-tag {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 10px;
    background-color: var(--bg-primary, #ffffff);
    border: 1px solid var(--border-color, #e5e7eb);
    border-radius: 4px;
    font-size: 12px;
    cursor: pointer;
    transition: all 0.2s ease;
    user-select: none;
}

.node-output-variable-tag:hover {
    background-color: var(--primary-color, #2673ea);
    color: #ffffff;
    border-color: var(--primary-color, #2673ea);
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.node-output-variable-tag:hover .node-output-variable-icon,
.node-output-variable-tag:hover .node-output-variable-key,
.node-output-variable-tag:hover .node-output-variable-value {
    color: #ffffff;
}

/* 변수 아이콘 */
.node-output-variable-icon {
    font-size: 14px;
    flex-shrink: 0;
}

/* 변수 키 (이름) */
.node-output-variable-key {
    font-weight: 500;
    color: var(--text-primary, #333);
}

/* 변수 값 (미리보기) */
.node-output-variable-value {
    color: var(--text-secondary, #666);
    font-size: 11px;
    max-width: 200px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* 이전 노드 정보 표시 */
.node-previous-node-info {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 12px;
    padding: 4px 8px;
    background-color: var(--bg-secondary, #f5f5f5);
    border-radius: 4px;
    border: 1px solid var(--border-color, #e5e7eb);
}

.node-previous-node-info span:first-child,
.node-previous-node-info span:last-child {
    opacity: 0.7;
}

#node-previous-node-name-display {
    color: var(--primary-color, #2673ea);
    font-weight: 500;
}
