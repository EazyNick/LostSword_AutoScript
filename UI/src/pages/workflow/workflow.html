<!doctype html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>ÏõåÌÅ¨ÌîåÎ°úÏö∞ Ìé∏ÏßëÍ∏∞</title>

        <!-- CSS ÌååÏùºÎì§ Î°úÎìú -->
        <!-- Í≥µÌÜµ Ïä§ÌÉÄÏùº (Ï†ÑÏ≤¥ Ïï±Ïùò Í∏∞Î≥∏ Ïä§ÌÉÄÏùº) -->
        <link rel="stylesheet" href="../../styles/common.css" />
        <!-- Ìó§Îçî Ïª¥Ìè¨ÎÑåÌä∏ Ïä§ÌÉÄÏùº -->
        <link rel="stylesheet" href="../../styles/components/header.css" />
        <!-- ÏÇ¨Ïù¥ÎìúÎ∞î Ïª¥Ìè¨ÎÑåÌä∏ Ïä§ÌÉÄÏùº -->
        <link rel="stylesheet" href="../../styles/components/sidebar.css" />
        <!-- Î™®Îã¨ Ïª¥Ìè¨ÎÑåÌä∏ Ïä§ÌÉÄÏùº -->
        <link rel="stylesheet" href="../../styles/components/modal.css" />
        <!-- ÎÖ∏Îìú ÏÑ§Ï†ï Î™®Îã¨ Ïä§ÌÉÄÏùº -->
        <link rel="stylesheet" href="../../styles/components/node-settings-modal.css" />
        <!-- ÏõåÌÅ¨ÌîåÎ°úÏö∞ ÌéòÏù¥ÏßÄ Ï†ÑÏö© Ïä§ÌÉÄÏùº -->
        <link rel="stylesheet" href="./workflow.css" />
    </head>
    <body>
        <!-- Î©îÏù∏ Ïï± Ïª®ÌÖåÏù¥ÎÑà -->
        <div id="app">
            <!-- ========================================== -->
            <!-- ÏÉÅÎã® Ìó§Îçî ÏòÅÏó≠ -->
            <!-- ========================================== -->
            <header class="top-header">
                <!-- Ìó§Îçî ÏôºÏ™Ω: Î¨∏ÏÑú Ï†ïÎ≥¥ -->
                <div class="header-left">
                    <div class="document-icon">üìÑ</div>
                    <span class="header-title">ÌÖåÏä§Ìä∏ Ïä§ÌÅ¨Î¶ΩÌä∏</span>
                </div>

                <!-- Ìó§Îçî Ï§ëÏïô: Ïä§ÌÅ¨Î¶ΩÌä∏ Ï†úÎ™© Î∞è ÏÑ§Î™Ö -->
                <div class="header-center">
                    <h1 class="script-title">Î°úÍ∑∏Ïù∏ ÌÖåÏä§Ìä∏</h1>
                    <p class="script-description">ÏÇ¨Ïö©Ïûê Î°úÍ∑∏Ïù∏ ÌîÑÎ°úÏÑ∏Ïä§ Í≤ÄÏ¶ù</p>
                </div>

                <!-- Ìó§Îçî Ïò§Î•∏Ï™Ω: Ïï°ÏÖò Î≤ÑÌäºÎì§ -->
                <div class="header-right">
                    <!-- Ï†ÑÏ≤¥ Ïä§ÌÅ¨Î¶ΩÌä∏ Ïã§Ìñâ Î≤ÑÌäº: Î™®Îì† Ïä§ÌÅ¨Î¶ΩÌä∏Î•º ÏàúÏ∞®Ï†ÅÏúºÎ°ú Ïã§Ìñâ -->
                    <button class="header-btn run-all-scripts-btn" title="Î™®Îì† Ïä§ÌÅ¨Î¶ΩÌä∏ Ïã§Ìñâ">
                        <span class="btn-icon">‚ñ∂‚ñ∂</span>
                        <span class="btn-text">Ï†ÑÏ≤¥ Ïã§Ìñâ</span>
                    </button>

                    <!-- Ï†ÄÏû• Î≤ÑÌäº: ÌòÑÏû¨ ÏõåÌÅ¨ÌîåÎ°úÏö∞Î•º Î°úÏª¨ Ïä§ÌÜ†Î¶¨ÏßÄÏóê Ï†ÄÏû• -->
                    <button class="header-btn save-btn">
                        <span class="btn-icon">üíæ</span>
                        <span class="btn-text">Ï†ÄÏû•</span>
                    </button>

                    <!-- ÎÖ∏Îìú Ï∂îÍ∞Ä Î≤ÑÌäº: ÏÉà ÏõåÌÅ¨ÌîåÎ°úÏö∞ ÎÖ∏ÎìúÎ•º Ï∂îÍ∞Ä -->
                    <button class="header-btn add-node-btn">
                        <span class="btn-icon">+</span>
                        <span class="btn-text">ÎÖ∏Îìú Ï∂îÍ∞Ä</span>
                    </button>

                    <!-- Ïã§Ìñâ Î≤ÑÌäº: ÏõåÌÅ¨ÌîåÎ°úÏö∞Î•º Ïã§Ìñâ (ÌòÑÏû¨Îäî ÏãúÎÆ¨Î†àÏù¥ÏÖò) -->
                    <button class="header-btn run-btn">
                        <span class="btn-icon">‚ñ∂</span>
                        <span class="btn-text">Ïã§Ìñâ</span>
                    </button>
                </div>
            </header>

            <!-- ========================================== -->
            <!-- Î©îÏù∏ Ïª®ÌÖêÏ∏† ÏòÅÏó≠ -->
            <!-- ========================================== -->
            <main class="main-content">
                <!-- ========================================== -->
                <!-- ÏôºÏ™Ω ÏÇ¨Ïù¥ÎìúÎ∞î: Ïä§ÌÅ¨Î¶ΩÌä∏ Î™©Î°ù -->
                <!-- ========================================== -->
                <aside class="sidebar">
                    <!-- ÏÇ¨Ïù¥ÎìúÎ∞î Ìó§Îçî -->
                    <div class="sidebar-header">
                        <h2>ÌÖåÏä§Ìä∏ Ïä§ÌÅ¨Î¶ΩÌä∏</h2>
                        <div class="sidebar-header-buttons">
                            <!-- ÏÉà Ïä§ÌÅ¨Î¶ΩÌä∏ Ï∂îÍ∞Ä Î≤ÑÌäº -->
                            <button class="add-script-btn">+</button>
                        </div>
                    </div>

                    <!-- Ïä§ÌÅ¨Î¶ΩÌä∏ Î™©Î°ù (ÎèôÏ†ÅÏúºÎ°ú Î°úÎìúÎê®) -->
                    <div class="script-list">
                        <!-- Ïä§ÌÅ¨Î¶ΩÌä∏ Î™©Î°ùÏùÄ sidebar.jsÏóêÏÑú ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§ -->
                    </div>

                    <!-- ÏÇ¨Ïù¥ÎìúÎ∞î Î¶¨ÏÇ¨Ïù¥Ï¶à Ìï∏Îì§: Í≤ΩÍ≥ÑÏÑ†ÏùÑ ÎìúÎûòÍ∑∏ÌïòÏó¨ ÏÇ¨Ïù¥ÎìúÎ∞î ÌÅ¨Í∏∞ Ï°∞Ï†à -->
                    <div class="sidebar-resize-handle" id="sidebar-resize-handle"></div>
                </aside>

                <!-- ========================================== -->
                <!-- Î©îÏù∏ ÏõåÌÅ¨ÌîåÎ°úÏö∞ ÏòÅÏó≠ -->
                <!-- ========================================== -->
                <div class="workflow-area">
                    <!-- ÏõåÌÅ¨ÌîåÎ°úÏö∞ Ï∫îÎ≤ÑÏä§: ÎÖ∏ÎìúÎì§Ïù¥ Î∞∞ÏπòÎêòÎäî Î©îÏù∏ ÏòÅÏó≠ -->
                    <!-- tabindex="0": ÌÇ§Î≥¥Îìú Ìè¨Ïª§Ïä§ Í∞ÄÎä•ÌïòÍ≤å ÏÑ§Ï†ï (Ï§å Í∏∞Îä•ÏùÑ ÏúÑÌï¥ ÌïÑÏöî) -->
                    <div class="workflow-canvas" id="workflow-canvas" tabindex="0">
                        <!-- Ï∫îÎ≤ÑÏä§ ÎÇ¥Î∂Ä ÏΩòÌÖêÏ∏† Ïª®ÌÖåÏù¥ÎÑà (ÌîºÍ∑∏Îßà Î∞©Ïãù) -->
                        <div class="canvas-content" id="canvas-content">
                            <!-- ========================================== -->
                            <!-- ÏÉòÌîå ÎÖ∏ÎìúÎì§ (Îç∞Î™®Ïö©) -->
                            <!-- ========================================== -->

                            <!-- ÎÖ∏Îìú 1: ÌéòÏù¥ÏßÄ Ïù¥Îèô ÎÖ∏Îìú (ÌååÎûÄÏÉâ) -->
                            <div class="workflow-node node-blue" id="node1">
                                <!-- ÏûÖÎ†• Ïó∞Í≤∞Ï†ê: Îã§Î•∏ ÎÖ∏ÎìúÏóêÏÑú Ïù¥ ÎÖ∏ÎìúÎ°ú Ïó∞Í≤∞ÎêòÎäî ÏßÄÏ†ê -->
                                <div class="node-input"></div>

                                <!-- ÎÖ∏Îìú Î©îÏù∏ Ïª®ÌÖêÏ∏† -->
                                <div class="node-content">
                                    <div class="node-title">ÌéòÏù¥ÏßÄ Ïù¥Îèô</div>
                                </div>

                                <!-- Ï∂úÎ†• Ïó∞Í≤∞Ï†ê: Ïù¥ ÎÖ∏ÎìúÏóêÏÑú Îã§Î•∏ ÎÖ∏ÎìúÎ°ú Ïó∞Í≤∞ÎêòÎäî ÏßÄÏ†ê -->
                                <div class="node-output"></div>

                                <!-- ÎÖ∏Îìú ÏÑ§Ï†ï Î≤ÑÌäº (Ìò∏Î≤Ñ Ïãú ÌëúÏãú) -->
                                <div class="node-settings">‚öô</div>
                            </div>

                            <!-- ÎÖ∏Îìú 2: ÏïÑÏù¥Îîî ÏûÖÎ†• ÎÖ∏Îìú (ÌååÎûÄÏÉâ) -->
                            <div class="workflow-node node-blue" id="node2">
                                <div class="node-input"></div>
                                <div class="node-content">
                                    <div class="node-title">ÏïÑÏù¥Îîî ÏûÖÎ†•</div>
                                </div>
                                <div class="node-output"></div>
                                <div class="node-settings">‚öô</div>
                            </div>

                            <!-- ÎÖ∏Îìú 3: Î°úÍ∑∏Ïù∏ ÏÑ±Í≥µ ÌôïÏù∏ ÎÖ∏Îìú (Ï£ºÌô©ÏÉâ, Ï°∞Í±¥ ÎÖ∏Îìú) -->
                            <div class="workflow-node node-orange" id="node3">
                                <div class="node-input"></div>
                                <div class="node-content">
                                    <!-- Ï°∞Í±¥ ÎÖ∏ÎìúÎäî ÏïÑÏù¥ÏΩò ÌëúÏãú -->
                                    <div class="node-icon">üîê</div>
                                    <div class="node-title">Î°úÍ∑∏Ïù∏ ÏÑ±Í≥µ ÌôïÏù∏</div>
                                </div>

                                <!-- Ï°∞Í±¥ ÎÖ∏ÎìúÎäî Îëê Í∞úÏùò Ï∂úÎ†•Ï†ê (True/False) -->
                                <div class="node-outputs">
                                    <!-- True Ï∂úÎ†•Ï†ê (ÏÑ±Í≥µ Ïãú) -->
                                    <div class="node-output true-output">
                                        <div class="output-dot true-dot"></div>
                                        <span class="output-label">True</span>
                                    </div>
                                    <!-- False Ï∂úÎ†•Ï†ê (Ïã§Ìå® Ïãú) -->
                                    <div class="node-output false-output">
                                        <div class="output-dot false-dot"></div>
                                        <span class="output-label">False</span>
                                    </div>
                                </div>

                                <div class="node-settings">‚öô</div>
                            </div>

                            <!-- ========================================== -->
                            <!-- Ïó∞Í≤∞ÏÑ†Îì§ (SVGÎ°ú Í∑∏Î†§Ïßê) -->
                            <!-- ========================================== -->
                            <svg class="connections" id="connections">
                                <!-- ÎÖ∏Îìú1ÏóêÏÑú ÎÖ∏Îìú2Î°úÏùò Ïó∞Í≤∞ÏÑ† -->
                                <path
                                    class="connection-line"
                                    d="M 200 100 L 350 100"
                                    stroke="#ffffff"
                                    stroke-width="2"
                                    fill="none"
                                />
                                <!-- ÎÖ∏Îìú2ÏóêÏÑú ÎÖ∏Îìú3ÏúºÎ°úÏùò Ïó∞Í≤∞ÏÑ† -->
                                <path
                                    class="connection-line"
                                    d="M 500 100 L 650 100"
                                    stroke="#ffffff"
                                    stroke-width="2"
                                    fill="none"
                                />
                            </svg>
                        </div>
                    </div>
                    <!-- workflow-canvas Îã´Í∏∞ -->
                </div>
            </main>
        </div>

        <!-- ========================================== -->
        <!-- Î™®Îã¨ Ï∞Ω: ÌåùÏóÖ ÌòïÌÉúÏùò ÎåÄÌôîÏÉÅÏûê -->
        <!-- ========================================== -->
        <div id="modal" class="modal">
            <div class="modal-content">
                <!-- Î™®Îã¨ Îã´Í∏∞ Î≤ÑÌäº -->
                <span class="close">&times;</span>
                <!-- Î™®Îã¨ ÎÇ¥Ïö©Ïù¥ ÎèôÏ†ÅÏúºÎ°ú ÏÇΩÏûÖÎêòÎäî ÏòÅÏó≠ -->
                <div id="modal-body"></div>
            </div>
        </div>

        <!-- ========================================== -->
        <!-- JavaScript ÌååÏùºÎì§ Î°úÎìú -->
        <!-- ========================================== -->

        <!-- 1. Ïú†Ìã∏ -->
        <script src="../../js/utils/logger.js"></script>
        <script type="module" src="../../js/utils/modal.js"></script>

        <!-- 2. API Ïú†Ìã∏Î¶¨Ìã∞ (ES6 Î™®Îìà) -->
        <script type="module" src="../../js/api/api.js"></script>
        <script type="module" src="../../js/api/scriptapi.js"></script>
        <script type="module" src="../../js/api/nodeapi.js"></script>
        <script type="module" src="../../js/api/user-settings-api.js"></script>

        <!-- 3. NodeManagerÍ∞Ä ÏùòÏ°¥ÌïòÎäî ÏÑúÎ∏å Ïª®Ìä∏Î°§Îü¨Îì§ -->
        <script src="../../js/components/node/node-selection.js"></script>
        <script src="../../js/components/node/node-drag.js"></script>
        <script src="../../js/components/node/node-canvas.js"></script>

        <script type="module" src="../../js/components/sidebar.js"></script>
        <script type="module" src="../../js/components/connection.js"></script>

        <!-- 4. ÎÖ∏Îìú ÏïÑÏù¥ÏΩò ÏÑ§Ï†ï (NodeManagerÎ≥¥Îã§ Î®ºÏ†Ä Î°úÎìú) -->
        <script src="../../js/components/node/node-icons.config.js"></script>

        <!-- 5. Ïó∞Í≤∞ Ìï∏Îì§Îü¨ (NodeManagerÎ≥¥Îã§ Î®ºÏ†Ä Î°úÎìú) -->
        <script src="../../js/components/node/node-connection-handler.js"></script>

        <!-- 6. Í≥µÌÜµ NodeManager -->
        <script src="../../js/components/node/node.js"></script>

        <!-- 6. ÎÖ∏Îìú Î†àÏßÄÏä§Ìä∏Î¶¨ Î∞è ÎèôÏ†Å Î°úÎìú (nodes.config.js Í∏∞Î∞ò) -->
        <!-- Í∞Å ÎÖ∏Îìú ÌÉÄÏûÖÏùÄ workflow.jsÏóêÏÑú ÎèôÏ†ÅÏúºÎ°ú Î°úÎìúÎê©ÎãàÎã§ -->

        <!-- 7. ÌéòÏù¥ÏßÄ Ï†ÑÏ≤¥ Î°úÏßÅ -->
        <script type="module" src="./workflow.js"></script>
    </body>
</html>
